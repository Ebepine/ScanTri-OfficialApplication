<!DOCTYPE html>
<html lang="en">

  <head>

    <meta charset="utf-8">

    <title>ScanneLe, La solution verte pour tous !</title>

    <!-- ??? (map)-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

    <!-- Bootstrap CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- template -->
    <link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic" rel="stylesheet" type="text/css">

    <!-- Plugin CSS -->
    <link href="vendor/magnific-popup/magnific-popup.css" rel="stylesheet" type="text/css">

    <!--CSS Calendar-->
    <link rel="stylesheet" type="text/css" href="./css/Calendar.css">

    <!--CSS map-->
    <link rel="stylesheet" href="./plugins/leaflet/leaflet.css" >
    <link rel="stylesheet" type="text/css" href="./css/map.css">

    <!-- CSS template -->
    <link href="css/freelancer.css" rel="stylesheet">


</head>

<body id="page-top">

  <!-- Navigation -->
  <nav class="navbar fixed-top">
    <div class="container-fluid">
        <div class="row">
          <div class="col-3 text-left btn-back" style="padding-top: 5px;"><i class="fas fa-chevron-left app-icon" id="Retour"></i></div>
          <div class="col-3 text-left btn-history" style="padding-top: 5px;"><i class="fas fa-history app-icon"></i></div>
          <div class="col-6 text-center"><img class="img-fluid" src="img/logo2.png" /></div>
          <div class="col-3 text-right" style="padding-top: 5px;"><i class="fas fa-cogs app-icon"></i></div>
        </div>
    </div>
  </nav>

  <!-- Contenu -->
  <div class="container-fluid content-container">
    <!-- Calendrier -->
    <div class="calendar-container">
      <div id="calendar" class="calendar"></div>
      <!-- détails des poubelles -->
      <div id="details">
        <div id="details_dynamic"></div>
      </div>
    </div>

    <!-- Carte -->
    <div class="map-container">
      <div id="mapid"></div>
      <div id="map" class="leaflet-container leaflet-safari leaflet-fade-anim leaflet-grab leaflet-touch-drag" tabindex="0" style="position: relative; outline: none;"></div>
    </div>
  </div>

  <!-- Footer -->
  <nav class="navbar fixed-bottom">
    <div class="container-fluid">
      <div class="row">
        <div class="col-4 text-center"><i onclick="showContainer('calendar');" class="fas fa-calendar-alt app-icon"></i></div>
        <div class="col-4 text-center" style="padding: 0;"><div class="app-icon-important"><img class="img-fluid " src="img/barcode.png" /></div></div>
        <div class="col-4 text-center"><i onclick="showContainer('map');" class="fas fa-map-marked-alt app-icon"></i></div>
      </div>
    </div>
  </nav>

  <!-- Bootstrap JavaScript -->
  <script src="vendor/jquery/jquery.min.js"></script>
  <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

  <!-- Plugin JavaScript -->
  <script src="vendor/jquery-easing/jquery.easing.min.js"></script>
  <script src="vendor/magnific-popup/jquery.magnific-popup.min.js"></script>

  <!-- Javascript Calendar -->
  <script type="text/javascript" src="./js/Calendar.js"></script>

  <!-- Javascript map -->
  <script src="./plugins/leaflet/leaflet.js" ></script>
  <script>

    var map = L.map('map').fitWorld();

    L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw', {
      maxZoom: 16,
      attribution: '',
      id: 'mapbox.streets'
    }).addTo(map);

    function onLocationFound(e) {
      var radius = e.accuracy / 2;

      L.marker(e.latlng).addTo(map).bindPopup('Vous êtes ici').openPopup();
      L.circle(e.latlng, radius).addTo(map);
    }

    function onLocationError(e) {
      alert(e.message);
    }

    map.on('locationfound', onLocationFound);
    map.on('locationerror', onLocationError);

    map.locate({setView: true, maxZoom: 16});

    // Navigation
    var fadeDuration = 200; // ms

    function showContainer(container_name)
    {
      $('.calendar-container').fadeOut(fadeDuration / 2);
      $('.map-container').fadeOut(fadeDuration / 2, function() {
        $('.' + container_name + '-container').fadeIn(fadeDuration / 2);
      });
    }

    // Bouton retour physique
    document.addEventListener("backbutton", function() {
      $('.btn-back:visible').find('i').click();
    }, false);
  </script>
  <!-- Javascript template -->
 <script src="js/freelancer.min.js"></script>

</body>

</html>
